import{r as a,a8 as C,Z as S,_ as w,a9 as N,j as s,aa as F}from"./index-DkM2t2s4.js";function E(){const[c,i]=a.useState(""),[d,m]=a.useState(""),[o,h]=a.useState(""),[t,p]=a.useState(""),{login:r}=C(),{isDarkMode:g}=S(),{language:n}=w(),[j,v]=a.useState(!1),f=N(),e=async u=>{u.preventDefault(),v(!0),h(""),p("");const x=await r(c,d);x.success?(p(n==="ar"?"تم تسجيل الدخول بنجاح!":"Signed in successfully!"),setTimeout(()=>f("/"),1500)):h(x.error||(n==="ar"?"بيانات الاعتماد غير صالحة":"Invalid credentials")),v(!1)};return s.jsxs("form",{className:`auth-form ${g?"dark-mode":""}`,onSubmit:e,children:[o&&s.jsx("div",{className:"auth-error",children:o}),t&&s.jsx("div",{className:"auth-success",children:t}),s.jsxs("div",{className:"input-group",children:[s.jsx("label",{htmlFor:"email",children:n==="ar"?"البريد الإلكتروني":"Email"}),s.jsx("input",{type:"email",id:"email",value:c,onChange:u=>i(u.target.value),required:!0,dir:n==="ar"?"rtl":"ltr",autoComplete:"username"})]}),s.jsxs("div",{className:"input-group",children:[s.jsx("label",{htmlFor:"password",children:n==="ar"?"كلمة المرور":"Password"}),s.jsx("input",{type:"password",id:"password",value:d,onChange:u=>m(u.target.value),required:!0,dir:n==="ar"?"rtl":"ltr",autoComplete:"current-password"})]}),s.jsx("button",{type:"submit",className:"auth-submit-btn",disabled:j,children:j?n==="ar"?"جاري التحميل...":"Loading...":n==="ar"?"تسجيل الدخول":"Sign In"})]})}function I(){const[c,i]=a.useState(""),[d,m]=a.useState(""),[o,h]=a.useState(""),[t,p]=a.useState(""),[r,g]=a.useState(""),[n,j]=a.useState(""),{signup:v}=C(),{isDarkMode:f}=S(),{language:e}=w(),[u,x]=a.useState(!1),y=N(),P=async l=>{if(l.preventDefault(),x(!0),g(""),j(""),o!==t){g(e==="ar"?"كلمات المرور غير متطابقة":"Passwords don't match"),x(!1);return}const b=await v(c,d,o);b.success?(j(e==="ar"?"تم إنشاء الحساب بنجاح!":"Account created successfully!"),setTimeout(()=>y("/"),1500)):g(b.error||(e==="ar"?"فشل إنشاء الحساب":"Signup failed")),x(!1)};return s.jsxs("form",{className:`auth-form ${f?"dark-mode":""}`,onSubmit:P,children:[r&&s.jsx("div",{className:"auth-error",children:r}),n&&s.jsx("div",{className:"auth-success",children:n}),s.jsxs("div",{className:"input-group",children:[s.jsx("label",{htmlFor:"name",children:e==="ar"?"الاسم الكامل":"Full Name"}),s.jsx("input",{type:"text",id:"name",value:c,onChange:l=>i(l.target.value),required:!0,dir:e==="ar"?"rtl":"ltr"})]}),s.jsxs("div",{className:"input-group",children:[s.jsx("label",{htmlFor:"email",children:e==="ar"?"البريد الإلكتروني":"Email"}),s.jsx("input",{type:"email",id:"email",value:d,onChange:l=>m(l.target.value),required:!0,dir:e==="ar"?"rtl":"ltr"})]}),s.jsxs("div",{className:"input-group",children:[s.jsx("label",{htmlFor:"password",children:e==="ar"?"كلمة المرور":"Password"}),s.jsx("input",{type:"password",id:"password",value:o,onChange:l=>h(l.target.value),minLength:"6",required:!0,dir:e==="ar"?"rtl":"ltr"})]}),s.jsxs("div",{className:"input-group",children:[s.jsx("label",{htmlFor:"confirmPassword",children:e==="ar"?"تأكيد كلمة المرور":"Confirm Password"}),s.jsx("input",{type:"password",id:"confirmPassword",value:t,onChange:l=>p(l.target.value),required:!0,dir:e==="ar"?"rtl":"ltr"})]}),s.jsx("button",{type:"submit",className:"auth-submit-btn",disabled:u,children:u?e==="ar"?"جاري التحميل...":"Loading...":e==="ar"?"إنشاء حساب":"Create Account"})]})}function L({initialMode:c="signin"}){const[i,d]=a.useState(c==="signin"),m=N(),o=F(),{isDarkMode:h}=S(),{language:t}=w();a.useEffect(()=>{d(o.pathname==="/signin")},[o]);const p=()=>{m(i?"/signup":"/signin",{replace:!0})},r={signin:{title:t==="ar"?"تسجيل الدخول":"Sign In",prompt:t==="ar"?"جديد في متجر العيلة؟ ":"New to Family Shop? ",action:t==="ar"?"إنشاء حساب":"Sign up"},signup:{title:t==="ar"?"إنشاء حساب":"Create Account",prompt:t==="ar"?"لديك حساب بالفعل؟ ":"Already have an account? ",action:t==="ar"?"تسجيل الدخول":"Sign in"},guest:t==="ar"?"المتابعة كزائر":"Continue as Guest"};return s.jsx("div",{className:`auth-container ${h?"dark-mode":""}`,children:s.jsxs("div",{className:"auth-card",children:[s.jsxs("div",{className:"auth-header",children:[s.jsx("h1",{children:i?r.signin.title:r.signup.title}),s.jsxs("p",{children:[i?r.signin.prompt:r.signup.prompt,s.jsx("span",{onClick:p,children:i?r.signin.action:r.signup.action})]})]}),i?s.jsx(E,{}):s.jsx(I,{}),s.jsx("div",{className:"auth-footer",children:s.jsx("button",{className:"guest-btn",onClick:()=>m("/"),children:r.guest})})]})})}export{L as default};
